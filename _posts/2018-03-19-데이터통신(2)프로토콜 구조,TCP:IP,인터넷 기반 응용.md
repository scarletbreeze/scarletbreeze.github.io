---

title:  데이터통신 (chapter2)
tag: class 

---

## 요점
*	프로토콜 구조란 시스템 간의 데이터 교환, 전자우편, 파일 전송 등의 분산 응용을 지원하기 위한 하드웨어와 소프트웨어의 계층 구조이다
*	프로토콜 구조의 각 계층에서는 하나 또는 그 이상의 프로토콜들이 통신 시스템에 구현되어 있다. 각 프로토콜들은 시스템 간의 데이터 교환을 위한 규칙들을 제공한다.
*	가장 많이 사용디고 있는 프로토콜은 TCP/IP 프로토콜이다. TCP/IP 프로토콜은 물리, 네트워크 접속, 인터넷, 수송, 그리고 응용계층으로 구성되어 있다.
*	또 다른 중요한 프로토콜 구조는 7계층 OSI 모델이다.

## 2.1 프로토콜 구조의 필요성

1. 발신 시스템은 데이터 전송로를 직접 가동시키든지, 또는 목적지 시스템의 식별자를 통해 통신망에 알려주어야 한다.

2. 발신 시스템은 목적지 시스템이 데이터를 받을 준비가 되어 있는가를 확인해야 한다.

3. 발신 시스템에 존재하는 파일 전송 응용 프로그램은 목적지 시스템에 존재하는 파일관리 프로그램이 파일을 받아 저장할 준비가 되어 있는 가를 확인해야 한다.

4.  두 시스템에서 사용되는 파일 형식이 다를 경우, 하나의 시스템은 형식 변환 기능을 수행해야 한다.

통신이 이루어지기 위해서는 두 시스템에서 상호 대응하는 동일한 계층 동료가 존재해야 한다.
**동료 계층들은 프로토콜이라 불리는 정해진 규칙에 따라 정해진 형식의 데이터블록들을 교환함으로써 통신한다.**

*	구문론(syntax): 데이터 블록의 형식을 다룸
*	의미론(semantics) : 조정과 오류관리를 위한 제어 정보를 다룸
*	타이밍(timing) : 속도조절과 순서 조정을 다룬다

## 2.2 간단한 프로토콜 구조
분산 데이터 통신 : 응용, 컴퓨터, 네트워크 등의 3개의 에이전트 포함
응용 -> 두 컴퓨터 시스템 사이에 데이터를 교환하는 분산 응용을 의미, 컴퓨터에서 여러 개의 다른 응용과 동시에 수행
ex) 파일 전송, 전자 우편
네트워크 접속 계층 : 종단시스템과 그것이 부착된 네트워크 사이의 데이터 교환을 다룬다.
수용계층 : 신뢰성 있게 데이터 교환 - 이러한 신뢰성 제공하는 기법 -> 하나의 공통계층에 모아두고 모든 응용이 공유하는 것이 합리적.
응용계층 : 다양한 사용자 응용을 지원하기 위해 필요한 작업을 다룸

**서브네트워크 상의 모든 호스트는 반드시 유일한 인터넷 주소를 가지고 있어야 한다**. -> (데이터가 올바른 호스트로 전송할 수 있도록) 호스트 내의 모든 **프로세스는 호스트에서 유일한 주소**를 가지고 있어야 한다. 이 주소는 데이터가 올바른 호스트로 전송할 수 있도록 해준다. 그리고 호스트 내의 모든 프로세스는 유일한 주소를 가지고 있어야 한다. 이 주소는 수송 계층 프로토콜이 올바른 프로세스로 데이터를 전송하는데 이용된다. 
두 번째 주소는 각 응용이 수송 계층의 서비스를 개별적으로 접근한다는 의미에서 서비스 접속점(SAP) 또는 포트(Port)라고 불린다.

**수송 계층** -> 데이터 블록을 편의상 두 개의 작은 조각으로 나눌 수도 있다. (이 각 조각에 수송 계층 헤더라고 하는 프로토콜 제어 정보를 붙인다)-> 데이터에 이러한 제어 정보를 붙이는 작업을 캡슐화라고 한다.

프로토콜 데이터 유닛(PDU): 상위 계층에서 내려온 데이터에 이러한 제어 정보를 결합한 것을 프로토콜 데이터 유닛 이라고 한다, 이 경우 **수송계층 PDU**가 되며 일반적으로 **세그먼트**라고 부른다. 
이 헤더에 포함되는 항목
*	발신지 포트 : 데이터를 보낸 응용을 가르킨다
*	목적지 포트 : 목적지 수송 계층이 세그먼트를 받았을 때, 데이터가 어떤 응용으로 전달되어야 하는지를 알아야 한다.
*	순서 번호 : 수송 계층 프로토콜이 특정 목적지 포트로 세그먼트를 순차적으로 전송할 경우 세그먼트의 번호를 붙인다. 따라서 만약 순서에 어긋나게 데이터가 도착했을 경우, 목적지의 수송 계층 프로토콜은 이들의 순서를 바로잡는다.
*	오류 검출 코드 : 송신측 수송 프로토콜은 세그먼트의 내용을 가지고 연산하여 코드를 만들어 붙인다. 수신측 수송 프로토콜은 똑같은 연산을 하여 그 결과를 수신된 코드와 비교한다. 만약 전송되는 과정에 오류가 발생한다면, 그 결과는 일치하지 않는다. 이 경우, 수신측은 그 세그먼트를 폐기하고 복구절차를 밟는다. 이러한 코드를 체크섬 또는 프레임 체크 시퀀스라고 부른다.

**네트워크 접속 프로토콜(NAP)**은 수송 계층으로부터 받은 데이터에 네트워크 접속 헤더를 부착하여 네트워크 접속 PDU를 만든다. 이 **PDU는 패킷**이라 불린다. 이 헤더에 포함되는 항목에는 다음과 같은 것이 있다.

*	발신지 컴퓨터 주소 : 이 패킷의 발신자를 가리킨다.
*	목적지 컴퓨터 주소 : 네트워크는 어떤 컴퓨터에게 패킷을 보내야 하는지 알아야 한다.
*	서비스 요청 : 네트워크 접속 프로토콜은 우선순위와 같은 서브 네트워크 서비스의 사용을 요청할 수 있다.

## 2.3 TCP / IP 프로토콜 구조

일반적으로 TCP/IP 프로토콜 스위트(suite)로 불린다. (스위트 : 인터넷 표준으로 채택된 많은 프로토콜로 이루어진다.)

*	물리 계층
*	네트워크 접속 계층
*	인터넷 계층
*	호스트-호스트 또는 수송 계층
*	응용 계층

물리계층 : 데이터 전송장치(워크스테이션, 컴퓨터)와 전송 매체 또는 네트워크 사이의 물리적인 인터페이스를 다룬다. 이 계층은 전송 매체의 특성, 신호의 특성, 데이터율 및 관련사항을 규정한다.

네트워크 접속 계층 : 같은 네트워크에 접속된 2개의 종단 시스템을 위하여 네트워크를 통해 데이터를 접속하고, 또한 배달하는 것을 다룸

인터넷 계층 : 2개의 장치가 다른 네트워크에 접속되어 있는 경우에 상호 연결된 네트워크를 통과하도록 하는 절차가 필요하게 된다. 이것이 인터넷 계층의 기능이다.

호스트-호스트 계층 또는 수송 계층 : 종단 간에 신뢰적인 전송서비스를 제공하거나 신뢰성을 고려하지 않고 단순히 종단 간 배달 서비스만을 제공하기도 함

응용 계층 : 다양한 사용자 응용을 지원하기 위해 필요한 작업을 다룸 

### TCP와 IP의 동작
![image](https://user-images.githubusercontent.com/23495876/37596924-19706f44-2bc1-11e8-9919-5f9002205df1.png)


전체 통신 시설이 여러개의 네트워크로 구성된다는 것을 명확히 하기 위하여, 각각의 성분 네트워크를 보통 서브네트워크라고 한다. 

서브네트워크 상의 모든 호스트는 반드시 유일한 주소를 가져야 함.
이 주소는 데이터가 올바른 호스트로 전송할 수 있도록 해준다.
그리고 호스트 내의 모든 프로세스는 호스트에서 유일한 주소를 가지고 있어야 한다.


![image](https://user-images.githubusercontent.com/23495876/37597012-6970fc8e-2bc1-11e8-828a-44fbf73a33d6.png)

TCP 헤더라고 하는 제어 정보를 붙여 TCP 세그먼트를 만드는 과정

-> TCP 세그먼트를 호스트 B에 전송하라는 명령과 함께 세그먼트를 IP에 넘기면, 
IP는 각 세그먼트에 제어 정보를 담은 헤더를 붙여서 IP 데이터그램을 만든다. 이 IP 헤더에 들어가는 항목에는 목적지 호스트 주소가 있다.

(이 내용 어렵다.)

### TCP와 UDP 

TCP/IP 프로토콜 구조상 대부분 응용들은 수송 프로토콜로 TCP를 사용.
TCP는 응용 계층에게 신뢰성 있는 데이터 전송을 보장하는 논리적인 연결 제공
연결은 다른 시스템에 있는 두 개체 사이에 설정되는 일시적인 논리적 연관을 뜻한다.
논리적 연결은 한 쌍의 포트 값을 의미한다.
연결이 지속되는 동안, 각 개체는 다른 개체로(부터) 들어오고 나가는 TCP 세그먼트를 추적하여 흐름을 제어하고 분실되거나 훼손된 세그먼트들을 복구한다.

TCP외에 UDP(User Datagram Protocol)라는 널리 사용되는 또 다른 수송 프로토콜이 존재한다.
UDP는 최소한의 프로토콜 기법을 이용하여 한 프로시저가 다른 프로시저들에게 메시지를 보낼 수 있도록 해준다.
트랜잭션 기반 응용들이 UDP를 사용한다.




--------

참고자료

데이터 통신 및 컴퓨터 통신 - william stallings 지음 한기준 , 김종근 옮김
 

