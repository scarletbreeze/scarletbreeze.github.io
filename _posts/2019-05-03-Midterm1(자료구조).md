---
layout: post
title: (자료구조)Midterm1 복습
categories: [data]
excerpt: ' '
comments: false
share: false
tags: data
date: 2019-05-03
---

## 자료구조 MidTerm 1번 문제 복습

> 1)스택 3개를 이용하여, 계산기 구현
>
> 2. getResourceAsStream을 이용하여 Scanner 사용
> 3. 예외처리 - 괄호 틀린 것 찾기, 잘못된 피연산자 개수, 지원하지 않는 연산자 오류

## 조교님 코드 통해 배운 것

### 1. Stack 라이브러리 사용

```java
Stack stack_bracket;
Stack stack_operator;
Stack stack_operand;
```

이렇게 먼저 선언한 뒤 while문에 들어와서

```java
while(sc.hasNext()){
    stack_bracket = new Stack();
    stack_operator = new Stack();
    stack_operand = new Stack();
    boolean success = true;
}
```

스택을 생성해줌으로서, 초기화 해줄 필요 없이 구현.

### 2. file read example using Scanner, getResourceAsStream

```java
Scanner sc = new Scanner(Mid1.class.getResourceAsStream("mid1.txt"))

```

이와 같은 방식으로 같은 위치에 있다면
`Class.getResource.AsStream("mid1.txt")`이런 식으로 불러올 수 있다.

파일을 한줄씩 읽기 위해선
`sc.hadNext()`를 해주면 된다.

### 3. 정규식 사용

#### ^ : 시작, \*: 0개 이상, \$ : 끝을 의미

```java
String pattern1 = "^[0-9]*$";
String pattern2 = "^[()]*$";
String pattern3 = "^[+\\-*/<>=*$";
```

### 4. 공백은 split함수로 없앤다.

```java
// read
String read_data = sc.nextLine();
System.out.print(read_data);
System.out.print(" = ");

// split " "
String[] split_data = read_data.split(" ");


```

여기서 눈여겨볼 점은
split_data라는 String 배열을 선언하고
read_data.split(" ");공백을 통해 나눠서 그 나눈 값을 split_data에 인자값으로 하나씩 넣어줬다는 점이다.

### 5. 프로그램 흐름

1. Stack 생성
2. 한 줄씩 입력값 받고 split을 통해 공백 제거
3. 한 줄의 전체 크기만큼 for문을 돈다

4. 숫자 -> 피연산자 stack에 push
5. 괄호 '(' -> 괄호 stack에 push

- else
  - bracket stack비어 있으면 -> "wrong parenthesis"
  - operand stack비어 있으면 ->"wrong operand"
  - int에다가 pop을 담고
  - operand stack비어 있으면 -> "wrong operand"
- 계산해서 값을 다시 피연산자 stack에 push

6. 연산자-> 연산자 stack에 push

- operator가 아니라면 wrong operator 표시

7. 최종적으로 suceess를 통해 true이면 stack의 연산자 빼서 출력

## 전체 코드

```java
package mid1;

import java.util.Scanner;
import java.util.Stack;

public class Mid1 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub

		Stack stack_bracket;
		Stack stack_operator;
		Stack stack_operand;

		// file read example using Scanner, getResourceAsStream
		Scanner sc = new Scanner(Mid1.class.getResourceAsStream("mid1.txt"));

		// setting prefix
		String pattern1 = "^[0-9]*$"; //정규식 : ^ 시작, * 0개이상. ,$ 끝
		String pattern2 = "^[()]*$";
		String pattern3 = "^[+\\-*/<>=]*$";

		while (sc.hasNext()) {

			// init
			stack_bracket = new Stack();
			stack_operator = new Stack();
			stack_operand = new Stack();
			boolean success = true;

			// read
			String read_data = sc.nextLine();
			System.out.print(read_data);
			System.out.print(" = ");

			// split " "
			String[] split_data = read_data.split(" ");

			for (int i = 0; i < split_data.length; i++) {

				String temp = split_data[i];

				// using prefix
				if (temp.matches(pattern1)) {
					// operand
					stack_operand.push(Integer.parseInt(temp));
				} else if (temp.matches(pattern2)) {
					// bracket
					if (temp.equals("(")) {
						stack_bracket.push(temp);
					} else {
						if (stack_bracket.isEmpty()) {
							// wrong parenthesis
							System.out.print("Error : wrong parenthesis");
							success = false;
							break;
						} else {

							// calculate
							if (stack_operand.isEmpty()) {
								// wrong operand
								System.out.print("Error : wrong operand");
								success = false;
								break;
							}

							int y = (int) stack_operand.pop();

							if (stack_operand.isEmpty()) {
								// wrong operand
								System.out.print("Error : wrong operand");
								success = false;
								break;
							}

							int x = (int) stack_operand.pop();

							int result = 0;

							switch ((String) stack_operator.pop()) {
							case "+":
								result = x + y;
								break;
							case "-":
								result = x - y;
								break;
							case "*":
								result = x * y;
								break;
							case "/":
								result = x / y;
								break;
							case "<":
								result = x < y ? 1 : 0;
								break;
							case ">":
								result = x > y ? 1 : 0;
								break;
							case "=":
								result = x == y ? 1 : 0;
								break;
							}

							stack_operand.push(result);
							stack_bracket.pop();

						}
					}
				} else if (temp.matches(pattern3)) {
					// operator
					stack_operator.push(temp);
				} else {
					// wrong operator
					System.out.print("Error : wrong operator");
					success = false;
					break;
				}
			}

			if (success)
				System.out.print(stack_operand.pop());

			System.out.println();

		}

	}

}

```

---

하영국 교수님 자바 수업
